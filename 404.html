<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Opps</title>
  <style>
    :root { color-scheme: dark; }
    html, body { height: 100%; margin: 0; }
    body {
      display: grid;
      place-items: center;
      background: radial-gradient(1200px 800px at 50% 35%, #1b2a4a 0%, #0b1020 50%, #070a12 100%);
      overflow: hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .wrap {
      width: min(900px, 92vw);
      aspect-ratio: 16 / 10;
      border-radius: 24px;
      position: relative;
      overflow: hidden;
      box-shadow:
        0 20px 60px rgba(0,0,0,.55),
        0 0 0 1px rgba(255,255,255,.08) inset;
      background:
        radial-gradient(900px 600px at 60% 20%, rgba(120,180,255,.20), transparent 60%),
        radial-gradient(800px 500px at 20% 80%, rgba(255,140,120,.12), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      backdrop-filter: blur(8px);
    }

    canvas { width: 100%; height: 100%; display: block; }

    /* H2 title above the bear's head */
    .title {
      position: absolute;
      left: 50%;
      top: 12%;
      transform: translate(-50%, -50%);
      margin: 0;
      padding: 10px 14px;
      border-radius: 16px;
      font-size: clamp(18px, 3vw, 34px);
      font-weight: 800;
      letter-spacing: .2px;
      color: rgba(255,255,255,.92);
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.12);
      text-shadow: 0 8px 24px rgba(0,0,0,.45);
      user-select: none;
      white-space: nowrap;
    }

    .hint {
      position: absolute;
      left: 16px;
      bottom: 14px;
      font-size: 13px;
      color: rgba(255,255,255,.75);
      letter-spacing: .2px;
      user-select: none;
      display: flex;
      gap: 10px;
      align-items: center;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.10);
    }
    .dot {
      width: 8px; height: 8px; border-radius: 999px;
      background: rgba(140,220,255,.95);
      box-shadow: 0 0 14px rgba(140,220,255,.8);
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse {
      0%,100% { transform: scale(.9); opacity: .75; }
      50% { transform: scale(1.25); opacity: 1; }
    }

    .btns {
      position: absolute;
      right: 16px;
      bottom: 14px;
      display: flex;
      gap: 10px;
    }
    button{
      appearance: none;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.9);
      padding: 10px 12px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 700;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      user-select: none;
    }
    button:hover { transform: translateY(-1px); background: rgba(0,0,0,.32); border-color: rgba(255,255,255,.22); }
    button:active { transform: translateY(0px) scale(.98); }
  </style>
</head>
<body>
  <div class="wrap">
    <h2 class="title">Ooops something went wrong !!!</h2>
    <canvas id="c"></canvas>

    <div class="hint"><span class="dot"></span> The bear is breathing, blinking, and waving</div>
    <div class="btns">
      <button id="wave">Wave</button>
      <button id="sparkle">Sparkle</button>
    </div>
  </div>

  <script>
    // ==== CANVAS SETUP ====
    const canvas = document.getElementById("c");
    const ctx = canvas.getContext("2d");

    function resize() {
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resize);
    resize();

    // ==== UTILS ====
    const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
    const lerp = (a,b,t)=>a+(b-a)*t;
    const easeInOut = t => t<.5 ? 2*t*t : 1 - Math.pow(-2*t+2,2)/2;

    // ==== BACKGROUND PARTICLES ====
    const particles = [];
    function spawnParticles(n=48){
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      for(let i=0;i<n;i++){
        particles.push({
          x: Math.random()*w,
          y: Math.random()*h,
          r: lerp(1.5, 4.5, Math.random()),
          vx: lerp(-0.12, 0.12, Math.random()),
          vy: lerp(-0.22, 0.04, Math.random()),
          a: lerp(0.10, 0.35, Math.random()),
          tw: lerp(0.8, 1.8, Math.random()),
          phase: Math.random()*Math.PI*2
        });
      }
    }
    spawnParticles();

    // ==== INTERACTION STATE ====
    let waveBoost = 0;      // 0..1
    let sparkleBoost = 0;   // 0..1

    document.getElementById("wave").addEventListener("click", () => {
      waveBoost = 1;
    });
    document.getElementById("sparkle").addEventListener("click", () => {
      sparkleBoost = 1;
    });

    // ==== BEAR DRAWING (REDRAW) ====
    function drawBear(t, W, H){
      // Scene anchors
      const cx = W*0.52;
      const cy = H*0.58;

      // Subtle breathing + bobbing
      const breathe = 1 + 0.02*Math.sin(t*1.6);
      const bob = 6*Math.sin(t*1.2);

      // Blink timing
      const blinkRaw = (Math.sin(t*0.85 + 1.7) + 1) * 0.5; // 0..1
      const blink = clamp((blinkRaw - 0.86) / 0.10, 0, 1); // only near peaks
      const eyeOpen = 1 - easeInOut(blink); // 1 open -> 0 closed

      // Waving
      const waveBase = Math.sin(t*2.3) * 0.18;
      const wave = waveBase * (0.35 + 0.65*waveBoost);

      // Colors
      const fur = "#7a5b46";
      const fur2 = "#6a4d3b";
      const muzzle = "#caa58b";
      const nose = "#2a1c16";
      const cheek = "rgba(255,160,160,.22)";

      // Shadow under bear
      ctx.save();
      ctx.translate(cx, cy + 130 + bob*0.25);
      ctx.scale(1.2, 0.55);
      ctx.beginPath();
      ctx.ellipse(0, 0, 170, 70, 0, 0, Math.PI*2);
      ctx.fillStyle = "rgba(0,0,0,.28)";
      ctx.fill();
      ctx.restore();

      // Body group
      ctx.save();
      ctx.translate(cx, cy + bob);
      ctx.scale(breathe, breathe);

      // Body
      ctx.save();
      ctx.translate(0, 90);
      ctx.beginPath();
      ctx.ellipse(0, 0, 160, 145, 0, 0, Math.PI*2);
      ctx.fillStyle = fur2;
      ctx.fill();

      // Belly highlight
      ctx.beginPath();
      ctx.ellipse(0, 25, 110, 95, 0, 0, Math.PI*2);
      ctx.fillStyle = "rgba(255,255,255,.08)";
      ctx.fill();
      ctx.restore();

      // Left arm (relaxed)
      ctx.save();
      ctx.translate(-145, 120);
      ctx.rotate(-0.25);
      ctx.beginPath();
      ctx.ellipse(0, 0, 52, 92, 0, 0, Math.PI*2);
      ctx.fillStyle = fur2;
      ctx.fill();

      // Paw
      ctx.translate(0, 72);
      ctx.beginPath();
      ctx.ellipse(0, 0, 46, 34, 0.1, 0, Math.PI*2);
      ctx.fillStyle = fur;
      ctx.fill();

      // Pad
      ctx.fillStyle = "rgba(0,0,0,.12)";
      ctx.beginPath();
      ctx.ellipse(0, 2, 18, 12, 0.1, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();

      // Right arm (waving)
      ctx.save();
      ctx.translate(145, 105);
      ctx.rotate(0.55 + wave);
      ctx.beginPath();
      ctx.ellipse(0, 0, 52, 92, 0, 0, Math.PI*2);
      ctx.fillStyle = fur2;
      ctx.fill();

      // Paw (wave tip)
      ctx.translate(0, 72);
      ctx.rotate(0.25 + wave*0.5);
      ctx.beginPath();
      ctx.ellipse(0, 0, 46, 34, -0.1, 0, Math.PI*2);
      ctx.fillStyle = fur;
      ctx.fill();

      // Pad
      ctx.fillStyle = "rgba(0,0,0,.12)";
      ctx.beginPath();
      ctx.ellipse(0, 2, 18, 12, -0.1, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();

      // Head
      ctx.save();
      ctx.translate(0, -20);
      ctx.beginPath();
      ctx.ellipse(0, 0, 165, 145, 0, 0, Math.PI*2);
      ctx.fillStyle = fur;
      ctx.fill();

      // Ears
      function ear(x, y, rot){
        ctx.save();
        ctx.translate(x, y);
        ctx.rotate(rot);
        ctx.beginPath();
        ctx.ellipse(0, 0, 56, 52, 0, 0, Math.PI*2);
        ctx.fillStyle = fur2;
        ctx.fill();

        ctx.beginPath();
        ctx.ellipse(6, 6, 28, 24, 0, 0, Math.PI*2);
        ctx.fillStyle = "rgba(255,255,255,.10)";
        ctx.fill();
        ctx.restore();
      }
      ear(-105, -95, -0.25);
      ear(105, -95, 0.25);

      // Muzzle
      ctx.save();
      ctx.translate(0, 35);
      ctx.beginPath();
      ctx.ellipse(0, 0, 95, 75, 0, 0, Math.PI*2);
      ctx.fillStyle = muzzle;
      ctx.fill();

      // Nose
      ctx.beginPath();
      ctx.ellipse(0, -12, 26, 18, 0, 0, Math.PI*2);
      ctx.fillStyle = nose;
      ctx.fill();

      // Mouth
      ctx.strokeStyle = "rgba(42,28,22,.85)";
      ctx.lineWidth = 4;
      ctx.lineCap = "round";
      ctx.beginPath();
      ctx.moveTo(-18, 10);
      ctx.quadraticCurveTo(-6, 22, 0, 24);
      ctx.quadraticCurveTo(6, 22, 18, 10);
      ctx.stroke();
      ctx.restore();

      // Cheeks
      ctx.fillStyle = cheek;
      ctx.beginPath(); ctx.ellipse(-70, 35, 20, 14, -0.2, 0, Math.PI*2); ctx.fill();
      ctx.beginPath(); ctx.ellipse(70, 35, 20, 14, 0.2, 0, Math.PI*2); ctx.fill();

      // Eyes
      function eye(x, y){
        ctx.save();
        ctx.translate(x, y);

        // Eye glow
        ctx.fillStyle = "rgba(255,255,255,.10)";
        ctx.beginPath();
        ctx.ellipse(0, 0, 20, 18, 0, 0, Math.PI*2);
        ctx.fill();

        // Pupil (scaled for blink)
        ctx.save();
        ctx.scale(1, lerp(0.08, 1, eyeOpen));
        ctx.fillStyle = "#111";
        ctx.beginPath();
        ctx.ellipse(0, 0, 7, 9, 0, 0, Math.PI*2);
        ctx.fill();

        // Highlight
        ctx.fillStyle = "rgba(255,255,255,.9)";
        ctx.beginPath();
        ctx.ellipse(-2, -3, 2.2, 2.2, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.restore();

        // Lid line when blinking
        if(eyeOpen < 0.35){
          ctx.strokeStyle = "rgba(0,0,0,.55)";
          ctx.lineWidth = 3;
          ctx.beginPath();
          ctx.moveTo(-10, 0);
          ctx.quadraticCurveTo(0, 5, 10, 0);
          ctx.stroke();
        }
        ctx.restore();
      }
      eye(-55, -18);
      eye(55, -18);

      // Forehead shine
      const g = ctx.createRadialGradient(30, -80, 10, 20, -70, 170);
      g.addColorStop(0, "rgba(255,255,255,.14)");
      g.addColorStop(1, "rgba(255,255,255,0)");
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.ellipse(10, -70, 120, 90, -0.2, 0, Math.PI*2);
      ctx.fill();

      ctx.restore(); // head
      ctx.restore(); // body group
    }

    // ==== SPARKLES ====
    const sparkles = [];
    function addSparkles(n=18){
      const W = canvas.getBoundingClientRect().width;
      const H = canvas.getBoundingClientRect().height;
      for(let i=0;i<n;i++){
        sparkles.push({
          x: lerp(W*0.25, W*0.80, Math.random()),
          y: lerp(H*0.20, H*0.78, Math.random()),
          r: lerp(1.2, 3.2, Math.random()),
          life: lerp(0.6, 1.2, Math.random()),
          t: 0,
          spin: lerp(-4, 4, Math.random())
        });
      }
    }

    function drawSparkles(dt){
      for(let i=sparkles.length-1;i>=0;i--){
        const s = sparkles[i];
        s.t += dt;
        const p = s.t / s.life;
        if(p >= 1){ sparkles.splice(i,1); continue; }
        const a = (1 - p) * 0.9;

        ctx.save();
        ctx.globalAlpha = a;
        ctx.translate(s.x, s.y);
        ctx.rotate(s.spin * p);
        ctx.beginPath();
        for(let k=0;k<8;k++){
          const ang = (Math.PI*2) * (k/8);
          const rr = (k%2===0) ? s.r*2.2 : s.r*0.9;
          ctx.lineTo(Math.cos(ang)*rr, Math.sin(ang)*rr);
        }
        ctx.closePath();
        ctx.fillStyle = "rgba(200,240,255,.9)";
        ctx.fill();
        ctx.restore();
      }
      ctx.globalAlpha = 1;
    }

    // ==== LOOP ====
    let last = performance.now();
    function frame(now){
      const dt = Math.min(0.033, (now - last)/1000);
      last = now;

      const rect = canvas.getBoundingClientRect();
      const W = rect.width;
      const H = rect.height;

      // Fade boosts
      waveBoost = Math.max(0, waveBoost - dt*0.9);
      sparkleBoost = Math.max(0, sparkleBoost - dt*0.8);

      // Clear
      ctx.clearRect(0,0,W,H);

      // Floating particles
      for(const p of particles){
        p.phase += dt*p.tw;
        p.x += p.vx*(1 + 0.5*Math.sin(p.phase));
        p.y += p.vy*(1 + 0.5*Math.cos(p.phase*0.9));

        if(p.x < -20) p.x = W+20;
        if(p.x > W+20) p.x = -20;
        if(p.y < -20) p.y = H+20;
        if(p.y > H+20) p.y = -20;

        const pulse = 0.5 + 0.5*Math.sin(p.phase);
        ctx.globalAlpha = p.a * (0.65 + 0.35*pulse);
        ctx.beginPath();
        ctx.ellipse(p.x, p.y, p.r*(0.9+0.25*pulse), p.r*(0.9+0.25*(1-pulse)), 0, 0, Math.PI*2);
        ctx.fillStyle = "rgba(180,220,255,1)";
        ctx.fill();
      }
      ctx.globalAlpha = 1;

      // Add sparkles when boosted
      if(sparkleBoost > 0 && Math.random() < 0.35) addSparkles(2);

      // Draw the bear
      drawBear(now/1000, W, H);

      // Draw sparkles
      drawSparkles(dt);

      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  </script>
</body>
</html>
